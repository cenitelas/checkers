(window["webpackJsonpcheckers-view"]=window["webpackJsonpcheckers-view"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},,,,,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){e.exports=a(40)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(11),r=a.n(i),c=(a(26),a(7)),o=a.n(c),h=a(8),l=a(2),u=a(3),d=a(4),f=a(5),m=a(0),p=a(6),k=(a(9),a(28),a(29),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={ChangeUser:e.ChangeUser,login:"",password:""},a.onChangeLogin=a.onChangeLogin.bind(Object(m.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onSubmit",value:function(e){var t=this;this.state.login.length>0&&this.state.password.length>0?fetch("/api/users/postuser",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({Name:this.state.login,Password:this.state.password})}).then((function(e){return e.json()})).then((function(e){t.state.ChangeUser(e)})).catch((function(e){console.log(e)})):alert("\u041f\u043e\u043b\u044f \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c\u0438!"),e.preventDefault()}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangeLogin",value:function(e){this.setState({login:e.target.value})}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.onSubmit,className:"login-form"},s.a.createElement("p",null,s.a.createElement("label",null,"\u041b\u043e\u0433\u0438\u043d : ",s.a.createElement("input",{type:"text",name:"login",value:this.state.login,onChange:this.onChangeLogin}))),s.a.createElement("p",null,s.a.createElement("label",null," \u041f\u0430\u0440\u043e\u043b\u044c: ",s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.onChangePassword}))),s.a.createElement("p",null,s.a.createElement("input",{type:"submit",value:"\u0412\u0445\u043e\u0434"})))}}]),t}(s.a.Component)),v=(a(16),a(30),a(31),a(32),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={check:e.check},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=1==this.state.check.CheckTypeId?"check check_white ":"check check_black ";return s.a.createElement("div",{className:e})}}]),t}(s.a.Component)),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={field:e.field,click:e.click},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=1==this.state.field.FieldTypeId?"field field_white ":2==this.state.field.FieldTypeId?"field field_black ":"field field_light ";return s.a.createElement("div",{className:t+this.state.light,onClick:function(){return e.state.click(e,e.state.field)}},this.state.field.Check&&s.a.createElement(v,{check:this.state.field.Check,key:this.state.field.Check.Id}))}}]),t}(s.a.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={message:e.message},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"wait-block"},s.a.createElement("div",{className:"wait-message"},this.state.message))}}]),t}(s.a.Component),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={board:e.board,fieldTake:null,checkDelete:[],isEnemy:!1,move:e.move,isMove:e.isMove,player:e.player,setIsMove:e.setIsMove},a.FiledClick=a.FiledClick.bind(Object(m.a)(a)),a.FiledLook=a.FiledLook.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"FiledClick",value:function(e,t){var a=this.state.isMove,n=this.state.player;if(a){this.setState({isEnemy:!1});var s=e.props.field,i=this.state.board.Fields;3!==s.FieldTypeId&&i.filter((function(e){return 3==e.FieldTypeId})).forEach((function(e){e.FieldTypeId=2})),s.Check&&n.CheckTypeId==s.Check.CheckTypeId?(this.setState({fieldTake:s}),this.setState({checkDelete:[]}),this.FiledLook(s,s)):(3==s.FieldTypeId&&this.ClearFields(s,this.state.fieldTake),this.setState({fieldTake:null}),this.setState({checkDelete:[]}),i.filter((function(e){return 3==e.FieldTypeId})).forEach((function(e){e.FieldTypeId=2})))}}},{key:"ClearFields",value:function(){var e=Object(h.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.setIsMove(!1),n=(n=this.state.checkDelete).slice(0,n.indexOf(t)),t.Check=a.Check,t.CheckId=a.CheckId,a.Check=null,n.forEach((function(e){e.Check&&(e.Check=null)})),1==t.Check.CheckTypeId&&7==t.PozY&&(t.Check.IsQuein=!0),2==t.Check.CheckTypeId&&0==t.PozY&&(t.Check.IsQuein=!0),e.next=11,fetch("/api/board/postboard",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(this.state.board)});case 11:return e.next=13,fetch("/api/move/PostMove",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(this.state.move)});case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"FiledLook",value:function(e,t){var a=this.state.board.Fields,n=a.find((function(t){return t.PozX==e.PozX-1&&t.PozY==e.PozY-1})),s=a.find((function(t){return t.PozX==e.PozX-1&&t.PozY==e.PozY+1})),i=a.find((function(t){return t.PozX==e.PozX+1&&t.PozY==e.PozY-1})),r=a.find((function(t){return t.PozX==e.PozX+1&&t.PozY==e.PozY+1}));n&&n.Check&&n.Check.CheckTypeId!=t.Check.CheckTypeId&&0!=n.PozX&&0!=n.PozY&&this.DiagLeftUp(n.PozX,n.PozY,t),s&&s.Check&&s.Check.CheckTypeId!=t.Check.CheckTypeId&&0!=s.PozX&&7!=s.PozY&&this.DiagLeftDown(s.PozX,s.PozY,t),i&&i.Check&&i.Check.CheckTypeId!=t.Check.CheckTypeId&&7!=i.PozX&&0!=i.PozY&&this.DiagRightUp(i.PozX,i.PozY,t),r&&r.Check&&r.Check.CheckTypeId!=t.Check.CheckTypeId&&7!=r.PozX&&7!=r.PozY&&this.DiagRightDown(r.PozX,r.PozY,t),this.VerefyField(n,s,i,r,t)&&(1==t.Check.CheckTypeId?(r&&!r.Check&&(r.FieldTypeId=3),s&&!s.Check&&(s.FieldTypeId=3)):(i&&!i.Check&&(i.FieldTypeId=3),n&&!n.Check&&(n.FieldTypeId=3)),t.Check.IsQuein&&(r&&!r.Check&&this.DiagRightDown(r.PozX,r.PozY,t),s&&!s.Check&&this.DiagLeftDown(s.PozX,s.PozY,t),i&&!i.Check&&this.DiagRightUp(i.PozX,i.PozY,t),n&&!n.Check&&this.DiagLeftUp(n.PozX,n.PozY,t)))}},{key:"VerefyField",value:function(e,t,a,n,s){var i=!0,r=this.state.board.Fields;if(e)var c=r.find((function(t){return t.PozX==e.PozX-1&&t.PozY==e.PozY-1}));if(t)var o=r.find((function(e){return e.PozX==t.PozX-1&&e.PozY==t.PozY+1}));if(a)var h=r.find((function(e){return e.PozX==a.PozX+1&&e.PozY==a.PozY-1}));if(n)var l=r.find((function(e){return e.PozX==n.PozX+1&&e.PozY==n.PozY+1}));return e&&e.Check&&e.Check.CheckTypeId!=s.Check.CheckTypeId&&c&&!c.Check&&(i=!1),t&&t.Check&&t.Check.CheckTypeId!=s.Check.CheckTypeId&&o&&!o.Check&&(i=!1),a&&a.Check&&a.Check.CheckTypeId!=s.Check.CheckTypeId&&h&&!h.Check&&(i=!1),n&&n.Check&&n.Check.CheckTypeId!=s.Check.CheckTypeId&&l&&!l.Check&&(i=!1),i}},{key:"SearchEmptyField",value:function(e,t){if(t.Check.IsQuein)this.SearchEmptyFieldQuein(e,t);else{var a=this.state.checkDelete;if(!(e[0].Check&&e.length>1&&e[1].Check))for(var n=0;n<e.length;n++){if(e[n].Check&&e[n].Check.CheckTypeId==t.Check.CheckTypeId)return;if(e[n].Check&&e.length-1>n&&e[n+1].Check)return;if(e[n].Check&&n>0&&e[n-1].Check)return;if(e[n].Check&&e.length-1==n)return;if(e[n].Check||3==e[n].FieldTypeId||(e[n].FieldTypeId=3,a.push(e[n-1]),a.push(e[n]),this.setState({checkDelete:a}),this.DiagLeftUp(e[n].PozX,e[n].PozY,t),this.DiagLeftDown(e[n].PozX,e[n].PozY,t),this.DiagRightUp(e[n].PozX,e[n].PozY,t),this.DiagRightDown(e[n].PozX,e[n].PozY,t)),!e[n].Check&&e.length-1>n&&!e[n+1].Check)return}}}},{key:"SearchEmptyFieldQuein",value:function(e,t){var a=this.state.checkDelete;if(!(e[0].Check&&e.length<2))for(var n=0;n<e.length;n++){if(e[n].Check&&e[n].Check.CheckTypeId===t.Check.CheckTypeId)return;if(e[n].Check&&e.length-1>n&&e[n+1].Check)return;if(e[n].Check&&n>0&&e[n-1].Check)return;if(n<e.length-1&&e[n].PozX>t.PozX&&e[n].PozX>e[n+1].PozX){if(!e[n].Check)return;t=e[n].check}if(n<e.length-1&&e[n].PozX<t.PozX&&e[n].PozX<e[n+1].PozX){if(!e[n].Check)return;t=e[n].check}if(n<e.length-1&&e[n].PozY>t.PozY&&e[n].PozY>e[n+1].PozY){if(!e[n].Check)return;t=e[n].check}if(n<e.length-1&&e[n].PozY<t.PozY&&e[n].PozY<e[n+1].PozY){if(!e[n].Check)return;t=e[n].check}a.push(e[n]),this.setState({checkDelete:a}),3==e[n].FieldTypeId||e[n].Check||(e[n].FieldTypeId=3,this.DiagLeftUp(e[n].PozX,e[n].PozY,t),this.DiagLeftDown(e[n].PozX,e[n].PozY,t),this.DiagRightUp(e[n].PozX,e[n].PozY,t),this.DiagRightDown(e[n].PozX,e[n].PozY,t))}}},{key:"DiagLeftUp",value:function(e,t,a){for(var n=[],s=this.state.board.Fields;-1!=e&&-1!=t;)n.push(s.find((function(a){return a.PozX==e&&a.PozY==t}))),e--,t--;this.SearchEmptyField(n,a)}},{key:"DiagLeftDown",value:function(e,t,a){for(var n=[],s=this.state.board.Fields;-1!=e&&8!=t;)n.push(s.find((function(a){return a.PozX==e&&a.PozY==t}))),e--,t++;this.SearchEmptyField(n,a)}},{key:"DiagRightUp",value:function(e,t,a){for(var n=[],s=this.state.board.Fields;8!=e&&-1!=t;)n.push(s.find((function(a){return a.PozX==e&&a.PozY==t}))),e++,t--;this.SearchEmptyField(n,a)}},{key:"DiagRightDown",value:function(e,t,a){for(var n=[],s=this.state.board.Fields;8!=e&&8!=t;)n.push(s.find((function(a){return a.PozX==e&&a.PozY==t}))),e++,t++;this.SearchEmptyField(n,a)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"board"},this.state.board.Fields.map((function(t,a){return s.a.createElement(y,{field:t,key:t.Id,click:e.FiledClick})})))}}]),t}(s.a.Component),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={time:e.time,newTime:0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalP=setInterval((function(){var t=e.state.time;if(t&&t.MoveTime){var a=t.MoveTime.split("T")[1].split(".")[0].split(":"),n=new Date,s=new Date;s.setHours(a[0]),s.setMinutes(a[1]),s.setSeconds(a[2]),e.setState({newTime:(s-n)/1e3})}}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalP)}},{key:"render",value:function(){return this.state.newTime}}]),t}(s.a.Component),P=(a(33),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={id:e.id,chat:{},message:"",user:e.user},a.SendMessage=a.SendMessage.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalP=setInterval(Object(h.a)(o.a.mark((function t(){var a,n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.chat,t.next=3,fetch("/api/chat/getchat/"+e.state.id);case 3:return n=t.sent,t.next=6,n.json();case 6:s=t.sent,JSON.stringify(s)!=JSON.stringify(a)&&s&&e.setState({chat:s});case 8:case"end":return t.stop()}}),t)}))),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalP)}},{key:"SendMessage",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.chat,a=this.state.message,n=this.state.user,!(a.length>0)){e.next=11;break}return t.Id=this.state.Id,t.Messages||(t.Messages=[]),t.Messages.push(n.Name+" > "+this.state.message),e.next=9,fetch("/api/chat/postchat",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 9:this.setState({chat:t}),this.setState({message:""});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.chat;return s.a.createElement("div",{className:"chat"},s.a.createElement("div",{className:"messages"},t&&t.Messages&&t.Messages.map((function(e){return s.a.createElement("p",{key:.001*Math.random()},e)}))),s.a.createElement("div",{className:"message"},s.a.createElement("input",{value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}}),s.a.createElement("button",{onClick:this.SendMessage},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),t}(s.a.Component)),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={player:e.player,game:e.game,players:[],move:{},user:e.user,isMove:!1},a.MoveRefresh=a.MoveRefresh.bind(Object(m.a)(a)),a.SetIsMove=a.SetIsMove.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.game,a=this.state.player;fetch("/api/player/GetPlayersGame/"+a.GameId).then((function(e){return e.json()})).then((function(t){return e.setState({players:t})})).catch((function(e){console.log(e)})),fetch("/api/board/getboard/"+a.Game.BoardId).then((function(e){return e.json()})).then((function(a){t.Board=a,e.setState({game:t})})).catch((function(e){console.log(e)})),this.intervalP=setInterval(Object(h.a)(o.a.mark((function n(){var s,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(2!==t.CountPlayers){n.next=8;break}return n.next=3,fetch("/api/move/getmove/"+a.GameId);case 3:return s=n.sent,n.next=6,s.json();case 6:i=n.sent,e.MoveRefresh(i);case 8:return n.next=10,fetch("/api/game/getgame/"+a.GameId);case 10:return s=n.sent,n.next=13,s.json();case 13:i=n.sent,e.GameRefresh(i);case 15:case"end":return n.stop()}}),n)}))),100)}},{key:"MoveRefresh",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var a,n,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.move,n=this.state.game,JSON.stringify(a)==JSON.stringify(t)){e.next=14;break}return this.setState({move:t}),e.next=6,fetch("/api/board/getboard/"+n.BoardId);case 6:return s=e.sent,e.next=9,s.json();case 9:i=e.sent,this.BoardRefresh(i),a=this.state.move,this.state.player.Id==a.PlayerId?this.setState({isMove:!0}):this.setState({isMove:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"BoardRefresh",value:function(e){var t=this.state.game;JSON.stringify(t.Board)!=JSON.stringify(e)&&(t.Board=e,this.setState({game:t}))}},{key:"GameRefresh",value:function(e){this.state.game.isFinish!=e.isFinish&&this.setState({game:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalP)}},{key:"SetIsMove",value:function(e){this.setState({isMove:e})}},{key:"render",value:function(){this.state.players;var e=this.state.player,t=this.state.move;return s.a.createElement("div",{className:"game"},s.a.createElement("span",null,s.a.createElement(b,{key:t.MoveTime,time:t})),2!=this.state.game.CountPlayers&&s.a.createElement(C,{key:e.Id,message:"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u0430"}),!this.state.isMove&&s.a.createElement(C,{key:t.MoveTime,message:s.a.createElement("div",null,s.a.createElement("h5",null,"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430"),s.a.createElement("h1",null,s.a.createElement(b,{time:t})))}),this.state.game.isFinish&&s.a.createElement(C,{key:this.state.move.MoveTime,message:"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430!"}),s.a.createElement("div",null,1==e.CheckTypeId?"\u0412\u0430\u0448\u0438 \u0431\u0435\u043b\u044b\u0435":"\u0412\u0430\u0448\u0438 \u0447\u0435\u0440\u043d\u044b\u0435"),s.a.createElement(P,{key:e.GameId,id:e.GameId,user:this.state.user}),this.state.game.Board&&this.state.game.Board.Fields&&s.a.createElement(g,{key:.001*Math.random(),board:this.state.game.Board,setIsMove:this.SetIsMove,player:this.state.player,isMove:this.state.isMove,move:this.state.move}))}}]),t}(s.a.Component),j=(a(34),a(35),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={games:[],users:[],joinGame:e.joinGame},a.UsersRefresh=a.UsersRefresh.bind(Object(m.a)(a)),a.GameRefresh=a.GameRefresh.bind(Object(m.a)(a)),a.ViewHost=a.ViewHost.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalU=setInterval(Object(h.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/users/getusers");case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,e.UsersRefresh(n),t.next=9,fetch("/api/game/getgames");case 9:return a=t.sent,t.next=12,a.json();case 12:n=t.sent,e.GameRefresh(n);case 14:case"end":return t.stop()}}),t)}))),100)}},{key:"GameRefresh",value:function(e){JSON.stringify(this.state.games)!==JSON.stringify(e)&&this.setState({games:e})}},{key:"UsersRefresh",value:function(e){JSON.stringify(this.state.users)!==JSON.stringify(e)&&this.setState({users:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalU)}},{key:"ViewHost",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/player/GetPlayerUser/"+t.HostId);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.CheckTypeId);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.games,a=this.state.users;return s.a.createElement("div",{className:"game-list"},s.a.createElement("div",{className:"header-game-list"},s.a.createElement("span",null,"\u0418\u0433\u0440\u043e\u043a"),s.a.createElement("span",null,"\u0422\u0438\u043f \u0438\u0433\u0440\u044b"),s.a.createElement("span",null,"\u0426\u0432\u0435\u0442")),t.map((function(t){return s.a.createElement("div",{key:t.Id,className:"line",onDoubleClick:function(){return e.state.joinGame(t)}},s.a.createElement("span",null,a.find((function(e){return e.Id==t.HostId})).Name),s.a.createElement("span",null,1==t.GameTypeId?"\u0420\u0443\u0441\u0441\u043a\u0438\u0435 \u0448\u0430\u0448\u043a\u0438":"\u041f\u043e\u0434\u0434\u0430\u0432\u043a\u0438"),s.a.createElement("span",null,1==e.ViewHost(t)?"\u0411\u0435\u043b\u044b\u0435":"\u0427\u0435\u0440\u043d\u044b\u0435"))})))}}]),t}(s.a.Component)),O=(a(19),s.a.Component,a(14)),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={user:{},player:{CheckTypeId:1},modal:null,game:{GameTypeId:1,CheckTypeId:1},isCreateGame:!1},a.ChangeUser=a.ChangeUser.bind(Object(m.a)(a)),a.ShowCreateGame=a.ShowCreateGame.bind(Object(m.a)(a)),a.CloseCreateGame=a.CloseCreateGame.bind(Object(m.a)(a)),a.CreateGame=a.CreateGame.bind(Object(m.a)(a)),a.SendNewGame=a.SendNewGame.bind(Object(m.a)(a)),a.JoinGame=a.JoinGame.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"ChangeUser",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var a,n,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/player/GetPlayerUser/"+t.Id);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,this.setState({user:t}),!n){e.next=16;break}return e.next=11,fetch("/api/player/getplayer/"+n.Id);case 11:return s=e.sent,e.next=14,s.json();case 14:i=e.sent,this.setState({player:i});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ShowCreateGame",value:function(){this.setState({isCreateGame:!0})}},{key:"CloseCreateGame",value:function(){this.setState({isCreateGame:!1})}},{key:"CreateGame",value:function(){var e=this,t=[{value:1,label:"\u0420\u0443\u0441\u0441\u043a\u0438\u0435 \u0448\u0430\u0448\u043a\u0438"}],a=[{value:1,label:"\u0411\u0435\u043b\u044b\u0435"},{value:2,label:"\u0427\u0435\u0440\u043d\u044b\u0435"}],n=this.state.game;return s.a.createElement("div",{className:"create-game"},s.a.createElement("label",null,"\u0422\u0438\u043f \u0438\u0433\u0440\u044b"),s.a.createElement(O.a,{defaultValue:t.find((function(e){return e.value==n.GameTypeId})),value:t.find((function(e){return e.value==n.GameTypeId})),options:t,onChange:function(t){n.GameTypeId=t.value,e.setState({game:n})}}),s.a.createElement("label",null,"\u0426\u0432\u0435\u0442 \u0448\u0430\u0448\u0435\u043a"),s.a.createElement(O.a,{defaultValue:a.find((function(e){return e.value==n.CheckTypeId})),value:a.find((function(e){return e.value==n.CheckTypeId})),options:a,onChange:function(t){n.CheckTypeId=t.value,e.setState({game:n})}}),s.a.createElement("button",{onClick:this.SendNewGame},"Create"))}},{key:"SendNewGame",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.game,a=this.state.player,t.CountPlayers=1,t.HostId=this.state.user.Id,t.isFinish=!1,e.next=7,fetch("/api/game/postgame",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 7:return n=e.sent,e.next=10,n.json();case 10:return t=e.sent,e.next=13,fetch("/api/player/GetPlayerUser/"+this.state.user.Id);case 13:return s=e.sent,e.next=16,s.json();case 16:(a=e.sent).GameId=t.Id,a.Game=t,this.setState({player:a}),this.setState({game:t}),this.setState({isCreateGame:!1});case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"JoinGame",value:function(){var e=Object(h.a)(o.a.mark((function e(t){var a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a={}).UserId=this.state.user.Id,a.GameId=t.Id,a.Game=t,!t){e.next=14;break}return e.next=7,fetch("/api/player/postplayer",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)});case 7:return n=e.sent,e.next=10,n.json();case 10:s=e.sent,a.CheckTypeId=s.CheckTypeId,a.Id=s.Id,this.setState({player:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.player,t=this.state.user;return e&&e.Game?s.a.createElement(I,{key:e.GameId,game:e.Game,player:e,user:t}):s.a.createElement("div",{className:"app"},this.state.isCreateGame&&s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"modal-border"},this.CreateGame())),!this.state.user.Id&&s.a.createElement(k,{ChangeUser:this.ChangeUser}),this.state.user.Id&&s.a.createElement("content",null,s.a.createElement("div",{className:"header"},s.a.createElement("h2",null,"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f: ",t.Name),s.a.createElement("h2",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0431\u0435\u0434: ",t.Victory),s.a.createElement("h2",{className:"create-game",onClick:this.ShowCreateGame},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443")),s.a.createElement(P,{key:"1",id:0,user:this.state.user}),s.a.createElement(j,{key:"2",joinGame:this.JoinGame})))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(z,{key:"1"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[21,1,2]]]);
//# sourceMappingURL=main.6a8f3c66.chunk.js.map